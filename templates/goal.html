<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />

	<title>monGoals</title>

	<meta name="description" content="monGoals" />
	<meta name="author" content="Radek Stepan" />

    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='img/favicon.ico') }}">

    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/reset.css') }}">
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/main.css') }}">

    <script src="{{ url_for('static', filename='js/raphael.js') }}" type="text/javascript" charset="utf-8"></script>
    <script src="{{ url_for('static', filename='js/g.raphael.js') }}" type="text/javascript" charset="utf-8"></script>
    <script src="{{ url_for('static', filename='js/g.line.js') }}" type="text/javascript" charset="utf-8"></script>
    <script src="{{ url_for('static', filename='js/jquery-1.5.2.min.js') }}" type="text/javascript" charset="utf-8"></script>

    <script type="text/javascript" charset="utf-8">
        jQuery(document).ready(function() {
            // 'fetch' colors from css
            var greenColor = jQuery('<div></div>').hide().addClass("green").css('color');
            var redColor = jQuery('<div></div>').hide().addClass("red").css('color');
            var blueColor = jQuery('<div></div>').hide().addClass("blue").css('color');

            var r = Raphael("chart-1");
            var x = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]
            var y = [0,0,0,20,20,30,7,0,5,10,20,30,15,60,30,7,0,5,10,0,0,0,20,20,30,0,0,0,20,20,30,70,90]
            r.g.linechart(0, 100, 300, 100, x, y, { shade:true, "colors":[greenColor] });
        });
    </script>
</head>
<body>

<header>
    <a href="{{ url_for('goals.log', id=goal._id) }}">Log progress &rarr;</a>
    <a href="{{ url_for('goals.all') }}">&larr; Back to all goals</a>
    Achieve greater inner balance
</header>

<div id="meta">
    <div class="red">
        5p <span class="red">(-2.5%)</span>
        <p>today</p>
    </div>
    <div class="red">
        27p <span class="green">(+5.7%)</span>
        <p>last 7 days</p>
    </div>
    <div class="red">
        193p <span class="green">(+255.7%)</span>
        <p>last 30 days</p>
    </div>
    <div class="red">
        25p <span></span>
        <p>remaining</p>
    </div>
    <div>
        {{ goal.points.target }}p <span></span>
        <p>total</p>
    </div>
</div>

<div class="clear"></div>

<article>
    <div class="part">
        <div class="column">
            <h2>Description</h2>
            <p>{{ goal.description }}</p>
        </div>
        <div class="column">
            <h2>Currency</h2>
            <table>
                {% for entry in goal.points.currency %}
                    <tr>
                        <td><b>{{ entry.points }}p</b></td>
                        <td>{{ entry.name }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>

        <div class="clear"></div>

        <div class="column red">
            <h2>Progress</h2>
            <h3>in 365 days, started 20 days ago</h3>
            <div id="chart-1" class="chart"></div>
        </div>
        <div class="column">
            <h2>Reward</h2>
            <center><img src="{{ url_for('static', filename='img/'+goal.reward) }}" style="max-width:300px;max-height:222px;" /></center>
        </div>
    </div>
    <div class="part">
        <div class="column wide">
            <h2>Log</h2>
            <table>
                {% for entry in goal.log %}
                    <tr class="{% if loop.last %}last{% endif %}">
                        <td><b>{{ entry.points.points }}p</b></td>
                        <td>
                            {{ entry.points.name }}
                            <p class="light">{{ entry.description }}</p>
                        </td>
                        <td><span class="nobr">{{ entry.date|timestamp_format }}</span></td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>
</article>

</body>
</html>